<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>seedsales ìë£Œ í˜ì´ì§€</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ğŸ”¹ Google Fonts: Roboto + Noto Sans KR -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      /* ì˜ë¬¸ì€ Roboto, í•œê¸€ì€ Noto Sans KR */
      font-family: 'Roboto', 'Noto Sans KR', system-ui, Segoe UI, sans-serif;
      background: #f6f7fb;
      color: #0f172a;
      margin: 0;
    }

    /* ğŸ”¹ ê³ ì • í—¤ë” */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: #fff;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      padding: 0 20px;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
    }
    .header h1 {
      font-size: 20px;
      margin: 0;
      font-weight: 700;
    }

    /* ğŸ”¹ ë³¸ë¬¸ */
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 28px 20px;
      padding-top: 90px; /* í—¤ë” ë†’ì´(60) + ì—¬ë°± */
    }

    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr);
    }
    .col-12 { grid-column: span 12; }
    .col-6 { grid-column: span 12; }
    @media (min-width: 720px) {
      .col-6 { grid-column: span 6; }
    }

    .card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
      margin-bottom: 20px; /* ğŸ”¹ ì¹´ë“œë¼ë¦¬ ì•„ë˜ ê°„ê²© */
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }
    .btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid #ddd;
      background: #f9f9f9;
      cursor: pointer;
      text-decoration: none;
      color: #111;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.4;
    }
    .btn-primary {
      background: #4f46e5;
      color: #fff;
      border-color: #4f46e5;
    }
    .hint {
      color: #6b7280;
      font-size: 13px;
      margin-top: 6px;
    }
    .footer {
      margin-top: 20px;
      color: #6b7280;
      font-size: 13px;
      text-align: right;
    }
    .notice {
      font-size: 14px;
      line-height: 1.6;
      color: #333;
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      padding: 12px 14px;
      margin-top: 8px;
      font-weight: bold;
      border-left: 5px solid #f59e0b; /* ë…¸ë€ìƒ‰ ê°•ì¡°ì„  */
    }

    .notice p {
      margin: 0 0 6px;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      transition: all 0.2s ease-in-out;
    }

  </style>
</head>
<body>
  <!-- ğŸ”¹ í—¤ë” -->
  <header class="header">
    <h1>Seedn</h1>
  </header>

  <!-- ğŸ”¹ ë³¸ë¬¸ -->
  <div class="container">
    <section class="card col-12 col-6">
      <h2>ğŸ“£ ê³µì§€</h2>
      <div class="notice">
        <p>1. íŒŒì¼ ë‹¤ìš´ë¡œë“œëŠ” ë­ ë°›ì„ì§€ í™•ì¸ í›„ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥ ì˜ˆì •.</p>
        <p>2. êµ¬ê¸€í¼ì€ ì—°ê²° ìƒíƒœ.</p>
      </div>
    </section>

    <div class="grid">
      <section class="card col-12 col-6">
        <h2>ğŸ“ ì˜ì—… í˜„í™©/ê³„ì•½ ì‹ ì²­</h2>
        <p class="hint">ê³„ì•½ ìƒí™© ë° ê³„ì•½ ì„±ì‚¬ í›„ ì´ìš©í•˜ì„¸ìš”.</p>
        <div class="row">
          <button class="btn btn-primary" onclick="location.href='https://forms.gle/fHVM4kfMH3dRgZeh7'">ì˜ì—… ì™„ë£Œ ì‹ ì²­</button>
          <button class="btn btn-primary" onclick="location.href='https://docs.google.com/forms/d/ì˜ˆì‹œí¼ID/viewform'">ì˜ì—… í˜„í™©</button>
        </div>
      </section>

      <section class="card col-12 col-6">
        <h2>ğŸ“‚ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</h2>
        <p class="hint">ì˜ì—…ì— í•„ìš”í•œ ìë£Œì…ë‹ˆë‹¤.</p>
        <div class="row">
          <a class="btn btn-primary" href="images/logo.jpg" download>ì œì•ˆì„œ</a>
          <a class="btn btn-primary" href="files/íšŒì‚¬ì†Œê°œì„œ (20250520).pdf" download>ì†Œê°œì„œ</a>
        </div>
      </section>
    </div>

      <section class="card col-12">
    <h2>ğŸ“Š ì˜¤ëŠ˜ ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ì</h2>
    <p class="hint">í˜ì´ì§€ì— ì ‘ì†í•˜ë©´ í˜„ì¬ ì‹œê°„ëŒ€ ì¹´ìš´íŠ¸ê°€ +1 ì¦ê°€í•©ë‹ˆë‹¤.</p>
    <div style="max-width:960px">
      <canvas id="visitsByHour" height="140"></canvas>
    </div>
    <div class="row" style="margin-top:8px">
      <span>ì˜¤ëŠ˜ ë°©ë¬¸ì í•©ê³„: <strong id="todayTotal">0</strong></span>
      <span style="margin-left:14px">ì´ ë°©ë¬¸ì: <strong id="grandTotal">0</strong></span>
    </div>
  </section>

  <!-- Chart.js CDN (í—¤ë”ê°€ ì•„ë‹ˆë¼ ì—¬ê¸° ë°°ì¹˜í•´ë„ ë©ë‹ˆë‹¤) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // ======= ì„¤ì • =======
  const NAMESPACE = 'seednsales'; // ì‚¬ì´íŠ¸ ê³ ìœ  í‚¤ (ì›í•˜ë©´ ë³€ê²½)
  // ====================

  // ì˜¤ëŠ˜ ë‚ ì§œ/ì‹œê°„ í‚¤ ë§Œë“¤ê¸°
  const now = new Date();
  const yyyy = now.getFullYear();
  const mm = String(now.getMonth() + 1).padStart(2, '0');
  const dd = String(now.getDate()).padStart(2, '0');
  const HH = String(now.getHours()).padStart(2, '0');
  const todayKey = `${yyyy}-${mm}-${dd}`;
  const hourKey = `${todayKey}-${HH}`;

  // CountAPI ìœ í‹¸
  const hit  = (key) => fetch(`https://api.countapi.xyz/hit/${NAMESPACE}/${encodeURIComponent(key)}`)
                          .then(r => r.json()).catch(()=>({value:0}));
  const get  = (key) => fetch(`https://api.countapi.xyz/get/${NAMESPACE}/${encodeURIComponent(key)}`)
                          .then(r => r.ok ? r.json() : {value:0})
                          .catch(()=>({value:0}));

  // 1) í˜„ì¬ ì‹œê°„ëŒ€ ì¹´ìš´íŠ¸ + ì´ ë°©ë¬¸ì ì¹´ìš´íŠ¸ ì¦ê°€
  //    (ë°©ë¬¸ ì‹œ í•œ ë²ˆë§Œ í˜¸ì¶œ)
  async function incrementCountersOnce() {
    try {
      await Promise.all([
        hit('total'),          // ì „ì²´ ëˆ„ì 
        hit(todayKey),         // ì˜¤ëŠ˜ ëˆ„ì 
        hit(hourKey),          // ì˜¤ëŠ˜-í˜„ì¬ì‹œê°„ ëˆ„ì 
      ]);
    } catch(e) {
      // ì‹¤íŒ¨í•´ë„ ê·¸ë˜í”„ ë¡œë”©ì€ ì§„í–‰
    }
  }

  // 2) 00~23ì‹œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  async function loadTodayHourlySeries() {
    const labels = Array.from({length:24}, (_,i)=> String(i).padStart(2,'0') + 'ì‹œ');
    const keys   = Array.from({length:24}, (_,i)=> `${todayKey}-${String(i).padStart(2,'0')}`);
    const values = [];

    for (const k of keys) {
      const { value } = await get(k);    // ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ 0 ì²˜ë¦¬
      values.push(value || 0);
    }

    // ë³´ì¡° ì§€í‘œ
    const { value: todaySum } = await get(todayKey);
    const { value: grandSum } = await get('total');

    document.getElementById('todayTotal').textContent = todaySum || 0;
    document.getElementById('grandTotal').textContent = grandSum || 0;

    return { labels, values };
  }

  // 3) ì°¨íŠ¸ ë Œë” (ì„  ê·¸ë˜í”„, yì¶• ìë™ ìŠ¤ì¼€ì¼)
  let visitsChart;
  function renderLineChart(labels, data) {
    const ctx = document.getElementById('visitsByHour').getContext('2d');

    if (visitsChart) visitsChart.destroy(); // ì¬ë Œë” ëŒ€ë¹„

    visitsChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'ì˜¤ëŠ˜ ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ì',
          data,
          tension: 0.3,
          fill: false,
          borderWidth: 2,
          pointRadius: 3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            // ìë™ ìŠ¤ì¼€ì¼ (ìœ ë™ì ). ë°”ë‹¥ì„ 0 ê·¼ì²˜ë¡œ ë‘ê³  ì‹¶ë‹¤ë©´ suggestedMin: 0 ì‚¬ìš©
            suggestedMin: 0,
            ticks: { precision: 0 }
          }
        },
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: { display: true }
        }
      }
    });
  }

  // 4) ì‹¤í–‰: ì¦ê°€ â†’ ë°ì´í„° ë¡œë“œ â†’ ì°¨íŠ¸
  (async () => {
    await incrementCountersOnce();
    const { labels, values } = await loadTodayHourlySeries();
    renderLineChart(labels, values);
  })();
</script>





    <div class="footer">Â© <span id="year"></span> SeedN</div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
