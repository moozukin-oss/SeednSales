<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>seedsales 자료 페이지</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 🔹 Google Fonts: Roboto + Noto Sans KR -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      /* 영문은 Roboto, 한글은 Noto Sans KR */
      font-family: 'Roboto', 'Noto Sans KR', system-ui, Segoe UI, sans-serif;
      background: #f6f7fb;
      color: #0f172a;
      margin: 0;
    }

    /* 🔹 고정 헤더 */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: #fff;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      padding: 0 20px;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
    }
    .header h1 {
      font-size: 20px;
      margin: 0;
      font-weight: 700;
    }

    /* 🔹 본문 */
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 28px 20px;
      padding-top: 90px; /* 헤더 높이(60) + 여백 */
    }

    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(12, 1fr);
    }
    .col-12 { grid-column: span 12; }
    .col-6 { grid-column: span 12; }
    @media (min-width: 720px) {
      .col-6 { grid-column: span 6; }
    }

    .card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
      margin-bottom: 20px; /* 🔹 카드끼리 아래 간격 */
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }
    .btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid #ddd;
      background: #f9f9f9;
      cursor: pointer;
      text-decoration: none;
      color: #111;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.4;
    }
    .btn-primary {
      background: #4f46e5;
      color: #fff;
      border-color: #4f46e5;
    }
    .hint {
      color: #6b7280;
      font-size: 13px;
      margin-top: 6px;
    }
    .footer {
      margin-top: 20px;
      color: #6b7280;
      font-size: 13px;
      text-align: right;
    }
    .notice {
      font-size: 14px;
      line-height: 1.6;
      color: #333;
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      padding: 12px 14px;
      margin-top: 8px;
      font-weight: bold;
      border-left: 5px solid #f59e0b; /* 노란색 강조선 */
    }

    .notice p {
      margin: 0 0 6px;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      transition: all 0.2s ease-in-out;
    }

  </style>
</head>
<body>
  <!-- 🔹 헤더 -->
  <header class="header">
    <h1>Seedn</h1>
  </header>

  <!-- 🔹 본문 -->
  <div class="container">
    <section class="card col-12 col-6">
      <h2>📣 공지</h2>
      <div class="notice">
        <p>1. 파일 다운로드는 뭐 받을지 확인 후 다운로드 가능 예정.</p>
        <p>2. 구글폼은 연결 상태.</p>
      </div>
    </section>

    <div class="grid">
      <section class="card col-12 col-6">
        <h2>📝 영업 현황/계약 신청</h2>
        <p class="hint">계약 상황 및 계약 성사 후 이용하세요.</p>
        <div class="row">
          <button class="btn btn-primary" onclick="location.href='https://forms.gle/fHVM4kfMH3dRgZeh7'">영업 완료 신청</button>
          <button class="btn btn-primary" onclick="location.href='https://docs.google.com/forms/d/예시폼ID/viewform'">영업 현황</button>
        </div>
      </section>

      <section class="card col-12 col-6">
        <h2>📂 파일 다운로드</h2>
        <p class="hint">영업에 필요한 자료입니다.</p>
        <div class="row">
          <a class="btn btn-primary" href="images/logo.jpg" download>제안서</a>
          <a class="btn btn-primary" href="files/회사소개서 (20250520).pdf" download>소개서</a>
        </div>
      </section>
    </div>

      <section class="card col-12">
    <h2>📊 오늘 시간대별 방문자</h2>
    <p class="hint">페이지에 접속하면 현재 시간대 카운트가 +1 증가합니다.</p>
    <div style="max-width:960px">
      <canvas id="visitsByHour" height="140"></canvas>
    </div>
    <div class="row" style="margin-top:8px">
      <span>오늘 방문자 합계: <strong id="todayTotal">0</strong></span>
      <span style="margin-left:14px">총 방문자: <strong id="grandTotal">0</strong></span>
    </div>
  </section>

  <!-- Chart.js CDN (헤더가 아니라 여기 배치해도 됩니다) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // ======= 설정 =======
  const NAMESPACE = 'seednsales'; // 사이트 고유 키 (원하면 변경)
  // ====================

  // 오늘 날짜/시간 키 만들기
  const now = new Date();
  const yyyy = now.getFullYear();
  const mm = String(now.getMonth() + 1).padStart(2, '0');
  const dd = String(now.getDate()).padStart(2, '0');
  const HH = String(now.getHours()).padStart(2, '0');
  const todayKey = `${yyyy}-${mm}-${dd}`;
  const hourKey = `${todayKey}-${HH}`;

  // CountAPI 유틸
  const hit  = (key) => fetch(`https://api.countapi.xyz/hit/${NAMESPACE}/${encodeURIComponent(key)}`)
                          .then(r => r.json()).catch(()=>({value:0}));
  const get  = (key) => fetch(`https://api.countapi.xyz/get/${NAMESPACE}/${encodeURIComponent(key)}`)
                          .then(r => r.ok ? r.json() : {value:0})
                          .catch(()=>({value:0}));

  // 1) 현재 시간대 카운트 + 총 방문자 카운트 증가
  //    (방문 시 한 번만 호출)
  async function incrementCountersOnce() {
    try {
      await Promise.all([
        hit('total'),          // 전체 누적
        hit(todayKey),         // 오늘 누적
        hit(hourKey),          // 오늘-현재시간 누적
      ]);
    } catch(e) {
      // 실패해도 그래프 로딩은 진행
    }
  }

  // 2) 00~23시 데이터 불러오기
  async function loadTodayHourlySeries() {
    const labels = Array.from({length:24}, (_,i)=> String(i).padStart(2,'0') + '시');
    const keys   = Array.from({length:24}, (_,i)=> `${todayKey}-${String(i).padStart(2,'0')}`);
    const values = [];

    for (const k of keys) {
      const { value } = await get(k);    // 존재하지 않으면 0 처리
      values.push(value || 0);
    }

    // 보조 지표
    const { value: todaySum } = await get(todayKey);
    const { value: grandSum } = await get('total');

    document.getElementById('todayTotal').textContent = todaySum || 0;
    document.getElementById('grandTotal').textContent = grandSum || 0;

    return { labels, values };
  }

  // 3) 차트 렌더 (선 그래프, y축 자동 스케일)
  let visitsChart;
  function renderLineChart(labels, data) {
    const ctx = document.getElementById('visitsByHour').getContext('2d');

    if (visitsChart) visitsChart.destroy(); // 재렌더 대비

    visitsChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: '오늘 시간대별 방문자',
          data,
          tension: 0.3,
          fill: false,
          borderWidth: 2,
          pointRadius: 3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            // 자동 스케일 (유동적). 바닥을 0 근처로 두고 싶다면 suggestedMin: 0 사용
            suggestedMin: 0,
            ticks: { precision: 0 }
          }
        },
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: { display: true }
        }
      }
    });
  }

  // 4) 실행: 증가 → 데이터 로드 → 차트
  (async () => {
    await incrementCountersOnce();
    const { labels, values } = await loadTodayHourlySeries();
    renderLineChart(labels, values);
  })();
</script>





    <div class="footer">© <span id="year"></span> SeedN</div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
